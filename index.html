<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <title>Weihnachtstraditions-Quiz</title>

    <!-- CSS einbinden -->
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <video autoplay muted loop playsinline id="bg-video">
        <source src="snowfall.mp4" type="video/mp4">
    </video>

    <div class="container">

        <!-- STARTSEITE -->
        <div class="card" id="start-card">
            <h2>Weihnachtstraditions-Quiz üéÑ</h2>
            <img id="start-image" src="images/startbild.jpg" alt="Startbild"
                style="max-width:300px; margin: 0 auto 16px auto; display:block; border-radius:12px;">

            <p>
                Willkommen zu deinem diesj√§hrigen Adventskalender! Jeden Tag siehst du eine ungew√∂hnliche oder witzige
                Tradition aus aller Welt.
                Jedoch sind nicht alle Traditionen echt,sondern manche auch frei erfunden. Du musst jeden Tag
                entscheiden, ob du die Tradition f√ºr echt
                oder erfunden h√§ltst. Viel Spa√ü dabei
            </p>

            <ul>
                <li>Text + Bild anschauen</li>
                <li>‚ÄûEcht‚Äú oder ‚ÄûFrei erfunden‚Äú w√§hlen</li>
                <li>Sofort R√ºckmeldung + Erkl√§rung sehen</li>
                <li>Mit ‚ÄûN√§chster Tag‚Äú zur n√§chsten Frage</li>
            </ul>

            <div class="buttons" style="justify-content:center; margin-top:16px;">
                <button id="btn-start" class="primary">Quiz starten ‚ûú</button>
            </div>
        </div>

        <!-- QUIZ (anfangs unsichtbar) -->
        <div class="card" id="quiz-card" style="display:none;">

            <div id="question-counter" class="question-counter"></div>

            <h2 id="quiz-title"></h2>

            <img id="quiz-image" src="" alt="Bild zum R√§tsel" style="display:none;">

            <p id="quiz-text"></p>

            <div class="buttons">
                <button id="btn-real" class="primary">Echte Weihnachtstradition</button>
                <button id="btn-fake" class="secondary">Frei erfunden</button>
            </div>

            <div id="result-box" class="result" style="display:none;"></div>
            <div id="explanation" class="explanation" style="display:none;"></div>

            <div class="buttons" style="margin-top:16px; justify-content: flex-end;">
                <button id="btn-next" class="secondary" style="display:none; flex:0 0 auto;">
                    N√§chste Frage ‚ûú
                </button>
            </div>

        </div>

        <!-- WARTESEITE F√úR DEN N√ÑCHSTEN TAG -->
        <div class="card" id="wait-card" style="display:none; text-align:center;">
            <h2>Das n√§chste R√§tsel kommt bald üéÅ</h2>
            <p>Du hast das heutige R√§tsel schon gemacht. Das n√§chste ist verf√ºgbar in:</p>

            <div id="countdown" class="countdown" style="font-size:2rem; margin:16px 0;"></div>

            <p style="font-size:0.9rem; opacity:0.7;">
                Schau morgen wieder vorbei üòä
            </p>
        </div>


        <!-- ENDSEITE -->
        <div class="card" id="end-card" style="display:none; text-align:center;">
            <h2>Frohe Weihnachten! üéÑ‚ú®</h2>

            <img src="images/froheweihnachten.jpg" alt="Frohe Weihnachten"
                style="max-width:300px; margin:16px auto; display:block; border-radius:12px;">

            <p>
                Du hast alle 24 Weihnachtstraditionen geschafft!
                Ich hoffe der Kalender hat dir gefallen. Ich w√ºnsche dir und deiner Familie fr√∂hliche Weihnachten üéÅ
            </p>

            <p style="font-size:0.9rem; margin-top:16px; opacity:0.7;">
                (Zum Neustart kannst du die Seite einfach aktualisieren.)
            </p>
        </div>
    </div>






    <!-- ============================= -->
    <!--          JAVASCRIPT          -->
    <!-- ============================= -->

    <script>
        /* ============================
           QUIZ-DATEN ‚Äì BEISPIELE
           Du kannst hier 24 Eintr√§ge anlegen.
           isReal: true  -> echte Weihnachtstradition
                   false -> frei erfunden
           ============================ */

        const QUIZZES = [
            {
                title: "Tag 1 ‚Äì Norwegen",
                text: "In Norwegen verstecken viele Familien am Weihnachtsabend ihre Besen, damit keine Hexen oder b√∂sen Geister in der Nacht darauf herumfliegen",
                image: "images/1.jpg",
                isReal: true,
                explanation: "Diese Tradition wird in Norwegen tats√§chlich erz√§hlt: In manchen Regionen werden Besen und Putzger√§te versteckt, weil man fr√ºher glaubte, Hexen k√∂nnten sie an Heiligabend stehlen und damit durch die Nacht fliegen"
            },
            {
                title: "Tag 2 ‚Äì Ungarn",
                text: "In Ungarn stellt man am 24. Dezember eine kleine Holzfigur eines Hahns vor die Haust√ºr, um Gl√ºck und Gesundheit im neuen Jahr zu sichern",
                image: "images/2.jpg",
                isReal: false,
                explanation: "Diese Geschichte ist frei erfunden. Es gibt viele sch√∂ne ungarische Weihnachtstraditionen ‚Äì aber der spezielle Gl√ºckshahn vor der Haust√ºr geh√∂rt nicht dazu."
            },
            {
                title: "Tag 3 ‚Äì Japan",
                text: "In Japan ist es an Weihnachten √ºblich, frittiertes H√ºhnchen von einer bekannten Fast-Food-Kette zu essen.",
                image: "images/3.jpg",
                isReal: true,
                explanation: "Das stimmt wirklich: In Japan ist ein Weihnachtsessen mit frittiertem H√ºhnchen (z.B. von KFC) sehr beliebt, teilweise mit Vorbestellung Wochen im Voraus"
            },
            {
                title: "Tag 4 ‚Äì Mexiko",
                text: "In Mexiko gibt es ein Fest, bei dem Figuren und Szenen aus geschnitzten Rettichen ausgestellt werden.",
                image: "images/4.jpg",
                isReal: true,
                explanation: "Das ist die ‚ÄûNoche de los R√°banos‚Äú (Nacht der Rettiche) in Oaxaca, die kurz vor Weihnachten stattfindet. Es werden aufwendig Figuren und Szenen aus Rettichen geschnitzt"
            },
            {
                title: "Tag 5 ‚Äì Niederlanden",
                text: "In den Niederlanden zieht am zweiten Weihnachtstag ein als ‚ÄûMandelmann‚Äú verkleideter Mensch durch die Stra√üen und verteilt Marzipan.",
                image: "images/5.jpg",
                isReal: false,
                explanation: "Die Figur des ‚ÄûMandelmanns‚Äú ist frei erfunden. In den Niederlanden sind allerdings Sinterklaas und seine Helfer sehr wichtige traditionelle Figuren."
            },
            {
                title: "Tag 6 ‚Äì Ukraine",
                text: "In der Ukraine schm√ºckt man den Weihnachtsbaum traditionell mit k√ºnstlichen Spinnen und Spinnennetzen als Gl√ºcksbringer",
                image: "images/6.jpg",
                isReal: true,
                explanation: "Diese Tradition basiert auf einer alten Legende: Eine Spinne soll einer armen Familie geholfen haben, den Baum zu schm√ºcken ‚Äì daher gelten Spinnen und Netze dort als Gl√ºckssymbol zu Weihnachten"
            },
            {
                title: "Tag 7 ‚Äì Island",
                text: "In Island hei√üt es, dass der Weihnachtskater J√≥lak√∂tturinn diejenigen frisst, die zu Weihnachten keine neuen Kleidungsst√ºcke tragen",
                image: "images/7.jpg",
                isReal: true,
                explanation: "Der Weihnachtskater ist eine echte Figur der isl√§ndischen Folklore und soll Faulheit bestrafen"
            },
            {
                title: "Tag 8 ‚Äì Estland",
                text: "In Estland √∂ffnet man am 25. Dezember f√ºr genau eine Minute alle Fenster, um die 'alte Luft' des Jahres hinauszulassen",
                image: "images/8.jpg",
                isReal: false,
                explanation: "Diese Tradition ist frei erfunden. Auch wenn Sto√ül√ºften wichtig ist"
            },
            {
                title: "Tag 9 ‚Äì Finnland ",
                text: "In Finnland wird am Weihnachtsmorgen traditionell Reisbrei gegessen, in dem eine Mandel versteckt ist. Wer sie findet, hat Gl√ºck oder darf sich etwas w√ºnschen",
                image: "images/9.jpg",
                isReal: true,
                explanation: "Der Brauch, eine ganze Mandel im warmen Reisbrei zu verstecken, ist in Finnland weit verbreitet"
            },
            {
                title: "Tag 10 ‚Äì Lettland",
                text: "In Lettland wird ein kleines Holzst√ºck ins Feuer geworfen, das angeblich jeden Wunsch erf√ºllt, der w√§hrend des Brennens ausgesprochen wird",
                image: "images/10.jpg",
                isReal: false,
                explanation: "Das Wunschholz existiert nicht ‚Äì diese Tradition ist ausgedacht."
            },
            {
                title: "Tag 11 ‚Äì Griechenland",
                text: "In Griechenland schm√ºcken viele Familien statt eines Baums ein kleines beleuchtetes Boot",
                image: "images/11.jpg",
                isReal: true,
                explanation: "Das 'Karavaki' ist eine echte Tradition in vielen Regionen, besonders auf Inseln"
            },
            {
                title: "Tag 12 ‚Äì Albanien",
                text: "In Albanien werden nach Weihnachten alte Erinnerungsst√ºcke an dem Baum befestigt und dieser aus dem Fenster geworfen als Symbol des 'Loslassens'",
                image: "images/12.jpg",
                isReal: false,
                explanation: "Das Einzige was losl√§sst ist mein Kommilitone im Studium"
            },
            {
                title: "Tag 13 ‚Äì Paraguay",
                text: "Am 1. Advent ritzt jedes Familienmitglied einen geheimen Wunsch als Symbol in eine Orange, trocknet sie und h√§ngt sie an den Baum, und an Heiligabend wird geraten, welcher Wunsch zu wem geh√∂rt",
                image: "images/13.jpg",
                isReal: false,
                explanation: "Den Gedanken finde ich zwar s√º√ü, aber leider ist er frei erfunden"
            },
            {
                title: "Tag 14 ‚Äì Taiwan",
                text: "In Taiwan decken Menschen ihre Tattoos an Weihnachten ab aus Respekt gegen√ºber den √Ñlteren und der Gemeinschaft",
                image: "images/14.jpg",
                isReal: false,
                explanation: "Auch wenn es in manchen L√§ndern tats√§chlich so ist, dass man seine Tattoos abdecken muss, ist dies keine Weihnachtstradition in Taiwan"
            },
            {
                title: "Tag 15 ‚Äì Bolivien",
                text: "In Bolivien werden traditionell Bohnen an Weihnachten gegessen. Der Brauch besagt, dass dadurch b√∂se Energie den K√∂rper durch die ausgeschiedenen Gase verlassen",
                image: "images/15.jpg",
                isReal: false,
                explanation: "Hihi verarscht. Jedes B√∂hnchen gibt ein T√∂nchen, aber nicht hier"
            },
            {
                title: "Tag 16 ‚Äì Portugal",
                text: "In Portugal bleibt beim Weihnachtsessen ein Stuhl f√ºr verstorbene Familienmitglieder frei",
                image: "images/16.jpg",
                isReal: true,
                explanation: "Der freie Platz (‚ÄûLugar para os ausentes‚Äú) ist Teil alter portugiesischer Traditionen"
            },
            {
                title: "Tag 17 ‚Äì USA",
                text: "In den Vereinigten Staaten hat es sich eingeb√ºrgert, dass sich Hundefreunde am Adventsonntag f√ºr eine gemeinsame Runde treffen",
                image: "images/17.jpg",
                isReal: false,
                explanation: "Nat√ºrlich ist diese Idee erfunden, auch wenn ich sie super toll finden w√ºrde"
            },
            {
                title: "Tag 18 ‚Äì Polen",
                text: "In Polen legt man zu Weihnachten Heu unter die Tischdecke als Erinnerung an die Krippe Jesu",
                image: "images/18.jpg",
                isReal: true,
                explanation: "Diese Tradition namens 'Sianko' ist weit verbreitet. Warum liegt hier Stroh?"
            },
            {
                title: "Tag 19 ‚Äì Ecuador",
                text: "In Ecuador bauen die Menschen gemeinsam eine Skulptur aus M√ºll um den Geist des Zusammenhalts zu feiern",
                image: "images/19.jpg",
                isReal: false,
                explanation: "Auch wenn es ein sehr nachhaltiger Ansatz w√§re, ist diese Tradition so nicht zu finden"
            },
            {
                title: "Tag 20 ‚Äì Tschechien",
                text: "In Tschechien wirft man an Weihnachten einen Schuh √ºber die Schulter. Zeigt die Schuhspitze zur T√ºr, wird man im n√§chsten Jahr heiraten.",
                image: "images/20.jpg",
                isReal: true,
                explanation: "Der Schuhwurf ist eine echte tschechische Weihnachtswahrsagung."
            },
            {
                title: "Tag 21 ‚Äì Schweden",
                text: "In Schweden schauen viele Familien jedes Jahr um 15 Uhr die Weihnachtssendung mit Donald Duck",
                image: "images/21.jpg",
                isReal: true,
                explanation: "‚ÄöKalle Anka‚Äò ist seit den 1960ern ein Weihnachtskult in Schweden. Wahrscheinlich sowas wie bei uns ‚ÄöDinner for One‚Äò  an Silvester"
            },
            {
                title: "Tag 22 ‚Äì Kroatien",
                text: "In Kroatien l√§sst man am 24. Dezember drei Kerzen komplett abbrennen: eine f√ºr Gesundheit, eine f√ºr Familie, eine f√ºr Wohlstand",
                image: "images/22.jpg",
                isReal: false,
                explanation: "Kerzen sind zwar weihnachtlich aber in dem Kontext leider fehl am Platz"
            },
            {
                title: "Tag 23 ‚Äì Belgien",
                text: "In Belgien backt jede Familie einen besonderen Kuchen f√ºr ihre Nachbarn, der dann an Heiligabend gemeinsam gegessen wird ‚Äì ein s√º√üer Brauch, der Gemeinschaft und Dankbarkeit symbolisiert",
                image: "images/23.jpg",
                isReal: false,
                explanation: "Kuchen f√ºr alle, aber leider nicht in dem Format. W√§re auch bei vielen Nachbarn etwas schwer zu managen"
            },
            {
                title: "Tag 24 ‚Äì Venezuela",
                text: "In Venezuela fahren viele Menschen am fr√ºhen Weihnachtsmorgen mit Rollschuhen zur Kirche",
                image: "images/24.jpg",
                isReal: true,
                explanation: "In Caracas werden Stra√üen sogar gesperrt, damit die Menschen zur 'Misa de Aguinaldo' rollen k√∂nnen. Good vibes incoming"
            }

        ];

        /* ============================
    QUIZ-LOGIK (REIHENFOLGE 1‚Äì24)
    ============================ */


        const startCard = document.getElementById("start-card");
        const quizCard = document.getElementById("quiz-card");
        const btnStart = document.getElementById("btn-start");
        const endCard = document.getElementById("end-card");
        const waitCard = document.getElementById("wait-card");
        const countdownEl = document.getElementById("countdown");

        // Advent startet am 1. Dezember des aktuellen Jahres
        const today = new Date();
        const startDate = new Date(today.getFullYear(), 11, 1); // 11 = Dezember (0-basiert)

        // String-Datum f√ºr heute (YYYY-MM-DD)
        const todayStr = today.toISOString().slice(0, 10);

        // Keys f√ºr localStorage
        const STORAGE_INDEX_KEY = "adventQuiz_lastIndex";
        const STORAGE_DATE_KEY = "adventQuiz_lastDate";
        const STORAGE_FINISHED_KEY = "adventQuiz_finished";


        // wie viele Tage seit dem Start vergangen?
        let daysSinceStart = Math.floor((today - startDate) / (1000 * 60 * 60 * 24));
        if (daysSinceStart < 0) daysSinceStart = 0;

        // maximal freigeschalteter Index f√ºr heute
        let maxIndexForToday = Math.min(daysSinceStart, QUIZZES.length - 1);

        let currentIndex = 0;
        let answered = false;
        let countdownInterval = null;

        function startCountdownToNextDay() {
            if (countdownInterval) {
                clearInterval(countdownInterval);
            }

            const now = new Date();
            const nextDay = new Date(now);
            nextDay.setDate(now.getDate() + 1);
            nextDay.setHours(0, 0, 0, 0); // Mitternacht des n√§chsten Tages

            function updateCountdown() {
                const now = new Date();
                const diff = nextDay - now;

                if (diff <= 0) {
                    countdownEl.textContent = "Das n√§chste R√§tsel ist jetzt verf√ºgbar! üéâ";
                    clearInterval(countdownInterval);
                    return;
                }

                const totalSeconds = Math.floor(diff / 1000);
                const days = Math.floor(totalSeconds / (60 * 60 * 24));
                const hours = Math.floor((totalSeconds % (60 * 60 * 24)) / 3600);
                const minutes = Math.floor((totalSeconds % 3600) / 60);
                const seconds = totalSeconds % 60;

                const dd = String(days).padStart(2, "0");
                const hh = String(hours).padStart(2, "0");
                const mm = String(minutes).padStart(2, "0");
                const ss = String(seconds).padStart(2, "0");

                countdownEl.textContent = `${dd}:${hh}:${mm}:${ss}`;
            }

            updateCountdown();
            countdownInterval = setInterval(updateCountdown, 1000);
        }

        function initState() {
            const finished = localStorage.getItem(STORAGE_FINISHED_KEY) === "true";

            // Wenn alle 24 R√§tsel schon erledigt wurden ‚Üí direkt Endseite
            if (finished) {
                startCard.style.display = "none";
                quizCard.style.display = "none";
                waitCard.style.display = "none";
                endCard.style.display = "block";
                return;
            }

            const lastIndexStr = localStorage.getItem(STORAGE_INDEX_KEY);
            const lastDateStr = localStorage.getItem(STORAGE_DATE_KEY);

            // Wenn heutiges R√§tsel bereits gel√∂st wurde ‚Üí Countdown anzeigen
            if (lastIndexStr !== null &&
                lastDateStr === todayStr &&
                Number(lastIndexStr) >= maxIndexForToday) {

                startCard.style.display = "none";
                quizCard.style.display = "none";
                endCard.style.display = "none";
                waitCard.style.display = "block";
                startCountdownToNextDay();
            } else {
                // Standard: Startseite zeigen
                startCard.style.display = "block";
                quizCard.style.display = "none";
                waitCard.style.display = "none";
                endCard.style.display = "none";
            }
        }



        const titleEl = document.getElementById("quiz-title");
        const textEl = document.getElementById("quiz-text");
        const imageEl = document.getElementById("quiz-image");
        const resultBox = document.getElementById("result-box");
        const explanationEl = document.getElementById("explanation");
        const btnReal = document.getElementById("btn-real");
        const btnFake = document.getElementById("btn-fake");
        const btnNext = document.getElementById("btn-next");
        const counterEl = document.getElementById("question-counter");

        function loadQuestion() {
            const quiz = QUIZZES[currentIndex];

            titleEl.textContent = quiz.title;
            textEl.textContent = quiz.text;

            if (quiz.image && quiz.image.trim() !== "") {
                imageEl.src = quiz.image;
                imageEl.alt = quiz.title;
                imageEl.style.display = "block";
            } else {
                imageEl.style.display = "none";
            }

            counterEl.textContent = `Tag ${currentIndex + 1}`;

            resultBox.style.display = "none";
            explanationEl.style.display = "none";
            btnNext.style.display = "none";

            answered = false;
            btnReal.disabled = false;
            btnFake.disabled = false;
        }

        function handleAnswer(guessIsReal) {
            if (answered) return;
            answered = true;

            const quiz = QUIZZES[currentIndex];
            const correct = (guessIsReal === quiz.isReal);

            resultBox.style.display = "block";
            explanationEl.style.display = "block";
            btnNext.style.display = "inline-block";

            if (correct) {
                resultBox.className = "result correct";
                resultBox.textContent = "Richtig! üéâ";
            } else {
                resultBox.className = "result wrong";
                resultBox.textContent = "Falsch! üòÖ";
            }

            explanationEl.textContent = quiz.explanation;

            btnReal.disabled = true;
            btnFake.disabled = true;
            // Fortschritt im Browser speichern
            localStorage.setItem(STORAGE_INDEX_KEY, String(currentIndex));
            localStorage.setItem(STORAGE_DATE_KEY, todayStr);

            // Wenn letztes R√§tsel gel√∂st wurde, merken wir uns das dauerhaft
            if (currentIndex === QUIZZES.length - 1) {
                localStorage.setItem(STORAGE_FINISHED_KEY, "true");
            }

            // Text des Weiter-Buttons je nach Situation
            if (currentIndex === QUIZZES.length - 1) {
                // letztes R√§tsel √ºberhaupt
                btnNext.textContent = "Weiter zur Endseite ‚ûú";
            } else if (currentIndex === maxIndexForToday) {
                // heutiges R√§tsel, aber es gibt noch weitere f√ºr zuk√ºnftige Tage
                btnNext.textContent = "Zum Countdown ‚ûú";
            } else {
                // (falls du sp√§ter doch mehrere am Tag erlauben willst)
                btnNext.textContent = "N√§chster Tag ‚ûú";
            }


        }
        btnStart.addEventListener("click", () => {
            startCard.style.display = "none";
            quizCard.style.display = "block";

            // aktueller Index = R√§tsel, das heute freigeschaltet ist
            currentIndex = maxIndexForToday;
            loadQuestion();
        });


        btnReal.addEventListener("click", () => handleAnswer(true));
        btnFake.addEventListener("click", () => handleAnswer(false));

        btnNext.addEventListener("click", () => {
            // Wenn letzter Tag insgesamt ‚Üí Endseite
            if (currentIndex === QUIZZES.length - 1) {
                quizCard.style.display = "none";
                endCard.style.display = "block";
                return;
            }

            // Wenn heutiges freigeschaltetes R√§tsel beendet ‚Üí zur Warte-Seite
            if (currentIndex === maxIndexForToday) {
                quizCard.style.display = "none";
                waitCard.style.display = "block";
                startCountdownToNextDay();
                return;
            }

            // Falls man irgendwann doch mehrere freischaltet
            currentIndex++;
            loadQuestion();
        });



        // Initialen Zustand herstellen (ggf. Countdown / Endseite anzeigen)
        initState();



    </script>

</body>

</html>
